<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quadro Evolutivo - Portal Dr. Marcio</title>
    <link rel="stylesheet" href="style.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .quadro-container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        .header-quadro {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-quadro h1 {
            color: #1e3c72;
            font-size: 28px;
            font-weight: 700;
        }

        .header-actions {
            display: flex;
            gap: 15px;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-back {
            background: #6c757d;
            color: white;
        }

        .btn-back:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .btn-refresh {
            background: #17a2b8;
            color: white;
        }

        .btn-refresh:hover {
            background: #138496;
        }

        .btn-export {
            background: #28a745;
            color: white;
        }

        .btn-export:hover {
            background: #218838;
        }

        .stats-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-left: 4px solid;
        }

        .stat-card.criticos {
            border-left-color: #dc3545;
        }

        .stat-card.acompanhamento {
            border-left-color: #ffc107;
        }

        .stat-card.estavel {
            border-left-color: #28a745;
        }

        .stat-card.aguardando {
            border-left-color: #17a2b8;
        }

        .stat-number {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-card.criticos .stat-number {
            color: #dc3545;
        }

        .stat-card.acompanhamento .stat-number {
            color: #ffc107;
        }

        .stat-card.estavel .stat-number {
            color: #28a745;
        }

        .stat-card.aguardando .stat-number {
            color: #17a2b8;
        }

        .stat-label {
            color: #666;
            font-weight: 600;
        }

        .filters-section {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            align-items: end;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
        }

        .filter-group label {
            margin-bottom: 5px;
            font-weight: 600;
            color: #1e3c72;
        }

        .filter-group input,
        .filter-group select {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .filter-group input:focus,
        .filter-group select:focus {
            border-color: #667eea;
            outline: none;
        }

        .pacientes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
        }

        .paciente-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border-left: 5px solid;
        }

        .paciente-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .paciente-card.critico {
            border-left-color: #dc3545;
        }

        .paciente-card.acompanhamento {
            border-left-color: #ffc107;
        }

        .paciente-card.estavel {
            border-left-color: #28a745;
        }

        .paciente-card.aguardando {
            border-left-color: #17a2b8;
        }

        .paciente-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .paciente-info h3 {
            color: #1e3c72;
            font-size: 18px;
            margin-bottom: 5px;
        }

        .paciente-id {
            color: #666;
            font-size: 12px;
            font-weight: 600;
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 600;
            color: white;
        }

        .status-critico {
            background: #dc3545;
        }

        .status-acompanhamento {
            background: #ffc107;
            color: #856404;
        }

        .status-estavel {
            background: #28a745;
        }

        .status-aguardando {
            background: #17a2b8;
        }

        .evolucao-timeline {
            margin: 15px 0;
        }

        .evolucao-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .evolucao-date {
            color: #666;
            font-weight: 600;
            min-width: 70px;
        }

        .evolucao-text {
            color: #333;
        }

        .comunicacao-status {
            display: flex;
            gap: 10px;
            margin: 15px 0;
        }

        .com-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 12px;
            color: #666;
        }

        .com-item.ativo {
            color: #28a745;
        }

        .com-item.pendente {
            color: #ffc107;
        }

        .com-item.inativo {
            color: #dc3545;
        }

        .acao-buttons {
            display: flex;
            gap: 8px;
            margin-top: 15px;
        }

        .btn-acao {
            flex: 1;
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-evoluir {
            background: #007bff;
            color: white;
        }

        .btn-evoluir:hover {
            background: #0056b3;
        }

        .btn-contato {
            background: #28a745;
            color: white;
        }

        .btn-contato:hover {
            background: #218838;
        }

        .btn-detalhes {
            background: #6c757d;
            color: white;
        }

        .btn-detalhes:hover {
            background: #5a6268;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }

        .empty-state .icon {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .quadro-container {
                padding: 15px;
            }

            .header-quadro {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }

            .header-actions {
                flex-wrap: wrap;
                justify-content: center;
            }

            .stats-overview {
                grid-template-columns: repeat(2, 1fr);
            }

            .filters-grid {
                grid-template-columns: 1fr;
            }

            .pacientes-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="quadro-container">
        <header class="header-quadro">
            <h1>üìä Quadro Evolutivo de Pacientes</h1>
            <div class="header-actions">
                <a href="/dashboard.html" class="btn btn-back">‚¨ÖÔ∏è Voltar</a>
                <button onclick="atualizarQuadro()" class="btn btn-refresh">üîÑ Atualizar</button>
                <button onclick="exportarQuadro()" class="btn btn-export">üìä Exportar</button>
            </div>
        </header>

        <!-- Vis√£o Geral de Status -->
        <div class="stats-overview">
            <div class="stat-card criticos">
                <div class="stat-number" id="total-criticos">0</div>
                <div class="stat-label">üö® Cr√≠ticos</div>
            </div>
            <div class="stat-card acompanhamento">
                <div class="stat-number" id="total-acompanhamento">0</div>
                <div class="stat-label">‚ö†Ô∏è Em Acompanhamento</div>
            </div>
            <div class="stat-card estavel">
                <div class="stat-number" id="total-estavel">0</div>
                <div class="stat-label">‚úÖ Est√°veis</div>
            </div>
            <div class="stat-card aguardando">
                <div class="stat-number" id="total-aguardando">0</div>
                <div class="stat-label">‚è≥ Aguardando</div>
            </div>
        </div>

        <!-- Filtros -->
        <div class="filters-section">
            <div class="filters-grid">
                <div class="filter-group">
                    <label for="filtroNome">Nome do Paciente:</label>
                    <input type="text" id="filtroNome" placeholder="Digite o nome">
                </div>
                <div class="filter-group">
                    <label for="filtroStatus">Status:</label>
                    <select id="filtroStatus">
                        <option value="">Todos os Status</option>
                        <option value="critico">üö® Cr√≠tico</option>
                        <option value="acompanhamento">‚ö†Ô∏è Em Acompanhamento</option>
                        <option value="estavel">‚úÖ Est√°vel</option>
                        <option value="aguardando">‚è≥ Aguardando</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="filtroComunicacao">Comunica√ß√£o:</label>
                    <select id="filtroComunicacao">
                        <option value="">Todas</option>
                        <option value="ativo">Ativo</option>
                        <option value="pendente">Pendente</option>
                        <option value="inativo">Sem Contato</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="filtroData">√öltima Evolu√ß√£o:</label>
                    <select id="filtroData">
                        <option value="">Todas as Datas</option>
                        <option value="hoje">Hoje</option>
                        <option value="semana">Esta Semana</option>
                        <option value="mes">Este M√™s</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Grid de Pacientes -->
        <div class="pacientes-grid" id="pacientes-grid">
            <!-- Cards dos pacientes ser√£o carregados aqui -->
        </div>

        <!-- Estado vazio -->
        <div class="empty-state" id="empty-state" style="display: none;">
            <div class="icon">üë•</div>
            <h3>Nenhum paciente encontrado</h3>
            <p>Ajuste os filtros ou aguarde o carregamento dos dados</p>
        </div>
    </div>

    <script>
        let pacientesData = [];
        let pacientesFiltrados = [];

        // Inicializar p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            carregarPacientes();
            configurarFiltros();
        });

        function configurarFiltros() {
            document.getElementById('filtroNome').addEventListener('input', aplicarFiltros);
            document.getElementById('filtroStatus').addEventListener('change', aplicarFiltros);
            document.getElementById('filtroComunicacao').addEventListener('change', aplicarFiltros);
            document.getElementById('filtroData').addEventListener('change', aplicarFiltros);
        }

        async function carregarPacientes() {
            try {
                // Simular dados para demonstra√ß√£o
                const dados = await simularDadosPacientes();
                pacientesData = dados;
                pacientesFiltrados = [...dados];
                
                atualizarEstatisticas();
                renderizarPacientes();
            } catch (error) {
                console.error('Erro ao carregar pacientes:', error);
            }
        }

        function simularDadosPacientes() {
            return Promise.resolve([
                {
                    id: 'P001',
                    nome: 'Maria Silva Santos',
                    status: 'critico',
                    ultimaEvolucao: '2025-01-29',
                    comunicacao: 'ativo',
                    evolucoes: [
                        { data: '29/01', texto: 'Press√£o alta persistente - 180x120' },
                        { data: '28/01', texto: 'Iniciado medica√ß√£o anti-hipertensiva' },
                        { data: '27/01', texto: 'Primeira consulta - diagn√≥stico inicial' }
                    ],
                    contatos: {
                        whatsapp: true,
                        email: true,
                        telefone: false
                    }
                },
                {
                    id: 'P002',
                    nome: 'Jo√£o Carlos Oliveira',
                    status: 'acompanhamento',
                    ultimaEvolucao: '2025-01-28',
                    comunicacao: 'pendente',
                    evolucoes: [
                        { data: '28/01', texto: 'Exames laboratoriais solicitados' },
                        { data: '25/01', texto: 'Consulta de retorno - melhora parcial' },
                        { data: '20/01', texto: 'In√≠cio do tratamento fisioter√°pico' }
                    ],
                    contatos: {
                        whatsapp: false,
                        email: true,
                        telefone: true
                    }
                },
                {
                    id: 'P003',
                    nome: 'Ana Paula Costa',
                    status: 'estavel',
                    ultimaEvolucao: '2025-01-26',
                    comunicacao: 'ativo',
                    evolucoes: [
                        { data: '26/01', texto: 'Paciente est√°vel - manter medica√ß√£o' },
                        { data: '19/01', texto: 'Resultados de exames normais' },
                        { data: '12/01', texto: 'Consulta de rotina - sem altera√ß√µes' }
                    ],
                    contatos: {
                        whatsapp: true,
                        email: true,
                        telefone: true
                    }
                },
                {
                    id: 'P004',
                    nome: 'Roberto Ferreira',
                    status: 'aguardando',
                    ultimaEvolucao: '2025-01-24',
                    comunicacao: 'inativo',
                    evolucoes: [
                        { data: '24/01', texto: 'Aguardando resultados de biopsia' },
                        { data: '22/01', texto: 'Procedimento realizado sem complica√ß√µes' },
                        { data: '15/01', texto: 'Consulta pr√©-procedimento' }
                    ],
                    contatos: {
                        whatsapp: false,
                        email: false,
                        telefone: true
                    }
                },
                {
                    id: 'P005',
                    nome: 'Carmen Rodrigues',
                    status: 'acompanhamento',
                    ultimaEvolucao: '2025-01-29',
                    comunicacao: 'ativo',
                    evolucoes: [
                        { data: '29/01', texto: 'Ajuste na dosagem da medica√ß√£o' },
                        { data: '27/01', texto: 'Relato de efeitos colaterais leves' },
                        { data: '24/01', texto: 'In√≠cio de novo protocolo de tratamento' }
                    ],
                    contatos: {
                        whatsapp: true,
                        email: true,
                        telefone: true
                    }
                }
            ]);
        }

        function atualizarEstatisticas() {
            const stats = {
                criticos: pacientesFiltrados.filter(p => p.status === 'critico').length,
                acompanhamento: pacientesFiltrados.filter(p => p.status === 'acompanhamento').length,
                estavel: pacientesFiltrados.filter(p => p.status === 'estavel').length,
                aguardando: pacientesFiltrados.filter(p => p.status === 'aguardando').length
            };

            document.getElementById('total-criticos').textContent = stats.criticos;
            document.getElementById('total-acompanhamento').textContent = stats.acompanhamento;
            document.getElementById('total-estavel').textContent = stats.estavel;
            document.getElementById('total-aguardando').textContent = stats.aguardando;
        }

        function renderizarPacientes() {
            const grid = document.getElementById('pacientes-grid');
            const emptyState = document.getElementById('empty-state');

            if (pacientesFiltrados.length === 0) {
                grid.style.display = 'none';
                emptyState.style.display = 'block';
                return;
            }

            grid.style.display = 'grid';
            emptyState.style.display = 'none';

            grid.innerHTML = pacientesFiltrados.map(paciente => `
                <div class="paciente-card ${paciente.status}">
                    <div class="paciente-header">
                        <div class="paciente-info">
                            <h3>${paciente.nome}</h3>
                            <div class="paciente-id">ID: ${paciente.id}</div>
                        </div>
                        <span class="status-badge status-${paciente.status}">
                            ${getStatusLabel(paciente.status)}
                        </span>
                    </div>
                    
                    <div class="evolucao-timeline">
                        <strong>üìã √öltimas Evolu√ß√µes:</strong>
                        ${paciente.evolucoes.slice(0, 3).map(ev => `
                            <div class="evolucao-item">
                                <span class="evolucao-date">${ev.data}</span>
                                <span class="evolucao-text">${ev.texto}</span>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="comunicacao-status">
                        <strong>üìû Comunica√ß√£o:</strong>
                        <span class="com-item ${paciente.contatos.whatsapp ? 'ativo' : 'inativo'}">
                            üì± WhatsApp
                        </span>
                        <span class="com-item ${paciente.contatos.email ? 'ativo' : 'inativo'}">
                            üìß Email
                        </span>
                        <span class="com-item ${paciente.contatos.telefone ? 'ativo' : 'inativo'}">
                            üìû Telefone
                        </span>
                    </div>
                    
                    <div class="acao-buttons">
                        <button class="btn-acao btn-evoluir" onclick="adicionarEvolucao('${paciente.id}')">
                            üìù Evoluir
                        </button>
                        <button class="btn-acao btn-contato" onclick="entrarContato('${paciente.id}')">
                            üí¨ Contato
                        </button>
                        <button class="btn-acao btn-detalhes" onclick="verDetalhes('${paciente.id}')">
                            üëÅÔ∏è Detalhes
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function getStatusLabel(status) {
            const labels = {
                'critico': 'üö® Cr√≠tico',
                'acompanhamento': '‚ö†Ô∏è Acompanhamento',
                'estavel': '‚úÖ Est√°vel',
                'aguardando': '‚è≥ Aguardando'
            };
            return labels[status] || status;
        }

        function aplicarFiltros() {
            const nome = document.getElementById('filtroNome').value.toLowerCase();
            const status = document.getElementById('filtroStatus').value;
            const comunicacao = document.getElementById('filtroComunicacao').value;
            const data = document.getElementById('filtroData').value;

            pacientesFiltrados = pacientesData.filter(paciente => {
                let matches = true;

                if (nome && !paciente.nome.toLowerCase().includes(nome)) {
                    matches = false;
                }

                if (status && paciente.status !== status) {
                    matches = false;
                }

                if (comunicacao && paciente.comunicacao !== comunicacao) {
                    matches = false;
                }

                // Filtro de data seria implementado com l√≥gica de datas reais
                
                return matches;
            });

            atualizarEstatisticas();
            renderizarPacientes();
        }

        function atualizarQuadro() {
            carregarPacientes();
        }

        function exportarQuadro() {
            alert('üìä Funcionalidade de exporta√ß√£o em desenvolvimento!\n\nEm breve voc√™ poder√° exportar:\n‚Ä¢ Relat√≥rio completo em PDF\n‚Ä¢ Planilha Excel\n‚Ä¢ Dados para impress√£o');
        }

        function adicionarEvolucao(pacienteId) {
            const paciente = pacientesData.find(p => p.id === pacienteId);
            const novaEvolucao = prompt(`üìù Nova evolu√ß√£o para ${paciente.nome}:\n\nDescreva a evolu√ß√£o m√©dica:`);
            
            if (novaEvolucao) {
                const hoje = new Date().toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit' });
                paciente.evolucoes.unshift({
                    data: hoje,
                    texto: novaEvolucao
                });
                renderizarPacientes();
                alert('‚úÖ Evolu√ß√£o adicionada com sucesso!');
            }
        }

        function entrarContato(pacienteId) {
            const paciente = pacientesData.find(p => p.id === pacienteId);
            
            const opcoes = [];
            if (paciente.contatos.whatsapp) opcoes.push('üì± WhatsApp');
            if (paciente.contatos.email) opcoes.push('üìß Email');
            if (paciente.contatos.telefone) opcoes.push('üìû Telefone');
            
            if (opcoes.length === 0) {
                alert('‚ùå Nenhum meio de comunica√ß√£o dispon√≠vel para este paciente.');
                return;
            }
            
            alert(`üí¨ Entrar em contato com ${paciente.nome}\n\nMeios dispon√≠veis:\n${opcoes.join('\n')}\n\n(Funcionalidade em desenvolvimento)`);
        }

        function verDetalhes(pacienteId) {
            const paciente = pacientesData.find(p => p.id === pacienteId);
            
            alert(`üëÅÔ∏è Detalhes de ${paciente.nome}\n\nID: ${paciente.id}\nStatus: ${getStatusLabel(paciente.status)}\n√öltima evolu√ß√£o: ${paciente.ultimaEvolucao}\n\n(Em breve: tela completa de detalhes)`);
        }
    </script>
</body>
</html>
